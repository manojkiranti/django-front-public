{"version":3,"file":"index-DYgDcmG0.js","sources":["../../src/pages/loans/schema/index.ts","../../src/pages/loans/routes/PersonalLoan.tsx","../../src/pages/loans/routes/index.tsx"],"sourcesContent":["import * as yup from 'yup';\n\nexport const loanSchema = yup.object().shape({\n    accountNumber: yup\n    .string()\n    .required('Account number is required.'),\n  phone: yup.string().required('Mobile number is required.'),\n  accountName: yup.string().required('Account name is required.'),\n  email: yup.string().email().required('Email is required.'),\n  loanType: yup.string().required('Please select a loan type'),\n  loanAmount: yup.number().required('Loan amount is required.'),\n  paybackPeriod: yup.number().required('Payback period is required')\n});","import { useEffect, useState } from \"react\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { Container } from \"@/components/Elements\";\nimport { Button, Col, Row, message, Breadcrumb, Card, Dropdown, Space } from \"antd\";\n\nimport { InputField, SelectField } from \"@/components/Form\";\nimport { DownOutlined, HomeOutlined } from \"@ant-design/icons\";\nimport { useCustomerServiceRequestMutation } from \"@/store/apis/coreApi\";\nimport { displayError } from \"@/utils/displayMessageUtils\";\n\nimport { LoanFormType } from \"../types\";\nimport { loanSchema } from \"../schema\";\nimport { loanMenu } from \"../constant\";\nimport useOtpModal from \"@/hooks/useOtpModal\";\nimport { replaceHyphenWithUnderscore } from \"@/utils/commonUtils\";\nimport { error } from \"console\";\nconst siteKey = import.meta.env.VITE_CAPTCHA_SITE_KEY;\n\nconst PersonalLoan = () => {\n    const navigate = useNavigate();\n    const { loantype } = useParams<{ loantype: string }>();\n    const [messageApi, contextHolder] = message.useMessage();\n    const [captchaValue, setCaptchaValue] = useState<string | null>(null);\n    const [serviceId, setServiceId] = useState<string | null>(null);\n    const [serviceRefNumber, setServiceRefNumber] = useState<string | null>(null);\n    const [postCustomerRequest, { isLoading }] =\n    useCustomerServiceRequestMutation();\n    \n    const loanTitles: Record<string, string> = {\n        \"home-loan\": \"Home Loan\",\n        \"car-loan\": \"Car Loan\",\n        \"gold-loan\": \"Gold Loan\",\n        \"loan-against-share\": \"Loan Against Share\",\n        \"credit-card-loan\": \"Credit Card\"\n    };\n    \n  const {\n    control,\n    handleSubmit,\n    setValue,\n    formState: { errors },\n  } = useForm<LoanFormType>({\n    defaultValues: {},\n    resolver: yupResolver(loanSchema),\n  });\n  console.log(errors)\n  useEffect(() => {\n    if(loantype) {\n        setValue(\"loanType\", loantype)\n    }   \n  },[loantype]);\n\n  const handleCaptchaChange = (value: string | null) => {\n    setCaptchaValue(value);\n  };\n\n  const onSubmit = (data: LoanFormType) => {\n    if (!captchaValue) {\n        messageApi.error(\"Please complete the reCAPTCHA to submit the form.\")\n        return;\n      }\n      postCustomerRequest({accountName: data.accountNumber, accountNumber: data.accountNumber, phone: data.phone,\n        prop_values:{...data}, product:'TELLER_SERVICE', service_type:'CHEQUE_DEPOSIT'}).unwrap()\n      .then(response => {\n        setServiceId(response.data.service_type)\n        setServiceRefNumber(response.data.ref_number)\n        showOtpModal();\n      }).catch(err => {\n        displayError(err);\n      })\n  };\n  const handleServiceSubmission = () => {\n    navigate('/')\n  };\n\n  const { showModal: showOtpModal, OtpModalComponent } = useOtpModal({\n    serviceId: serviceId,\n    refNumber: serviceRefNumber,\n    handleServiceSubmission: handleServiceSubmission\n  });\n  return (\n    <>\n    {contextHolder}\n\n    <Container width=\"sm\">\n\n  \n      <Row>\n        <Col xs={24}>\n         <Card title={loanTitles[loantype || \"\"] || \"Loan\"}>\n             <form onSubmit={handleSubmit(onSubmit)}>\n                <Row gutter={30}>\n                  <Col xs={24} md={8}>\n                    <InputField\n                      label=\"Account Number\"\n                      name=\"accountNumber\"\n                      control={control}\n                      error={errors.accountNumber?.message ?? \"\"}\n                      placeholder=\"Enter your registered account number\"\n                      size=\"large\"\n                      required={true}\n                    />\n                  </Col>\n                  <Col xs={24} md={8}>\n                    <InputField\n                      label=\"Mobile Number\"\n                      name=\"phone\"\n                      control={control}\n                      error={errors.phone?.message ?? \"\"}\n                      placeholder=\"Enter you registered mobile number\"\n                      size=\"large\"\n                      required={true}\n                    />\n                  </Col>\n                  <Col xs={24} md={8}>\n                    <InputField\n                      label=\"Account Name\"\n                      name=\"accountName\"\n                      control={control}\n                      error={errors.accountName?.message ?? \"\"}\n                      placeholder=\"Account Name\"\n                      size=\"large\"\n                      required={true}\n                    />\n                  </Col>\n                  \n                  <Col xs={24} md={8}>\n                    <InputField\n                      label=\"Email\"\n                      name=\"email\"            \n                      control={control}\n                      error={errors.email?.message ?? \"\"}\n                      placeholder=\"Email\"\n                      size=\"large\"\n                      required={true}\n                    />\n                  </Col>\n                  <Col xs={24} md={8}>\n                    <SelectField\n                        options={[\n                            {label:\"Home Loan\", value:\"home-loan\"},\n                            {label:\"Gold Loan\", value:\"gold-loan\"},\n                            {label:\"Loan Against Share\", value:\"loan-against-share\"},\n                            {label:\"Credit Card\", value:\"credit-card-loan\"}\n                        ]}\n                        name=\"loanType\"\n                        control={control}\n                        label=\"Loan Type\"\n                        disabled={true}\n                        size=\"large\"\n                        placeholder=\"Select Loan Type\"\n                        error={errors.loanType?.message ?? ''}\n                        required={true}\n                    />\n                  </Col>\n\n                  <Col xs={24} md={8}>\n                    <InputField\n                      label=\"Loan Amount\"\n                      name=\"loanAmount\"            \n                      control={control}\n                      error={errors.loanAmount?.message ?? \"\"}\n                      placeholder=\"Loan Amount\"\n                      type=\"number\"\n                      size=\"large\"\n                      required={true}\n                    />\n                  </Col>\n\n                  <Col xs={24} md={8}>\n                    <InputField\n                      label=\"Payback Period(in Years)\"\n                      name=\"paybackPeriod\"            \n                      control={control}\n                      error={errors.paybackPeriod?.message ?? \"\"}\n                      placeholder=\"Payback Period\"\n                      type=\"number\"\n                      size=\"large\"\n                      required={true}\n                      suffix=\"yrs\"\n                    />\n                  </Col>\n                  \n                  <Col xs={24}>\n                    <ReCAPTCHA sitekey={siteKey} onChange={handleCaptchaChange} />\n                  </Col>\n                  \n                </Row>\n                <Col xs={24} style={{marginTop:\"1rem\"}}>\n                  <Button type=\"primary\" htmlType=\"submit\" size=\"large\" loading={isLoading} disabled={isLoading}>\n                    Submit\n                  </Button>\n                </Col>\n              </form>\n         </Card>\n             \n          \n        </Col>\n      </Row>\n    </Container>\n    {OtpModalComponent}\n    </>\n  );\n};\n\nexport default PersonalLoan;\n","import {\n  Navigate,\n  Route,\n  Routes,\n  useNavigate,\n  useLocation,\n} from \"react-router-dom\";\nimport { Col, Row, Tabs } from \"antd\";\nimport { loanServices } from \"@/pages/home/constant\";\nimport { Container } from \"@/components/Elements\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport PersonalLoan from './PersonalLoan';\n\n\nexport const LoanRoutes = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const handleTabChange = (key: string) => {\n    navigate(key);\n  };\n  const activeKey =\n  loanServices.find((service) => location.pathname.endsWith(service.link))\n      ?.link || loanServices[0].link;\n    return (\n      <Container>\n      <Row>\n        <Col xs={24} md={24}>\n          <Tabs\n            activeKey={activeKey}\n            tabPosition=\"left\"\n            // style={{ height: \"calc(100vh - 520px)\" }}\n            onChange={handleTabChange}\n            items={loanServices.map(service => ({\n              label: (\n                <span>\n                  <FontAwesomeIcon icon={service.icon} style={{ marginRight: 8 }} />\n                  {service.title}\n                </span>\n              ),\n              key: service.link, // Use relative path as key\n              children:        <Routes>\n              <Route path=\":loantype\" element={<PersonalLoan />} />\n              <Route path=\"*\" element={<Navigate to={loanServices[0].link} replace />} />\n            </Routes>\n            }))}\n          />\n\n          {/* Define nested routes */}\n    \n        </Col>\n      </Row>\n    </Container>\n    \n    );\n  };"],"names":["loanSchema","yup.object","yup.string","yup.number","siteKey","PersonalLoan","navigate","useNavigate","loantype","useParams","messageApi","contextHolder","message","captchaValue","setCaptchaValue","useState","serviceId","setServiceId","serviceRefNumber","setServiceRefNumber","postCustomerRequest","isLoading","useCustomerServiceRequestMutation","loanTitles","control","handleSubmit","setValue","errors","useForm","yupResolver","useEffect","handleCaptchaChange","value","onSubmit","data","response","showOtpModal","err","displayError","handleServiceSubmission","OtpModalComponent","useOtpModal","jsxs","Fragment","jsx","Container","Row","Col","Card","InputField","SelectField","ReCAPTCHA","Button","LoanRoutes","location","useLocation","handleTabChange","key","activeKey","loanServices","service","Tabs","FontAwesomeIcon","Routes","Route","Navigate"],"mappings":"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"}